title ErysNotes

participant Teacher (Browser) as T
participant Student (Browser) as S
participant Server (PHP) as Erys
participant Server (Python) as Py

T->Erys: SSO login and initialise activity
activate Erys
Erys->Erys: Create activity
deactivate Erys
T->Erys: Upload data files
T->Erys: Make activity live
activate Erys
Erys->Py: Initialise user/activity
activate Py
Erys->Py: File upload
Py-->Erys: Acknowledge
deactivate Py
deactivate Erys

S->Erys: SSO login and open activity
activate Erys
note over Erys
Allocate student ID
and create working dir.
end note
Erys->Py:Initialise student
activate Py
note over Py
create working dir\nand copy files
end note
Py-->Erys: Acknowledge
deactivate Py
Erys-->S: Return notebook page
deactivate Erys
loop
S->Erys: Run a section of Python code
activate Erys
Erys->Py: Run a section of Python code
activate Py
note over Py
Load the student's environment, execute the 
Python code, and return output or error messages,
along with base64 encoded versions of any PNG files
created, all in a JSON message.
end note
Py-->Erys: return output
deactivate Py
Erys-->S: Return output
deactivate Erys
end